########################################################################################################
## This file includes scripted triggers for the war room and general scripted triggers for operations ##
########################################################################################################

# usage:
## country_has_custom_war_room_background = yes
country_has_custom_war_room_background = {
	OR = {
		original_tag = SOV
	}
}

# usage:
## country_has_custom_war_room_icon = yes
country_has_custom_war_room_icon = {
	OR = {
		AND = {
			original_tag = SOV
			has_government = communist
		}
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## war_room_operation_has_unique_progress_bar = yes
war_room_operation_has_unique_progress_bar = {
	OR = {
		check_variable = { operation_id = 1 }
	}
}

# usage:
## set_temp_variable = { amount = 1 }
## has_amount_of_possible_war_room_operations = yes
has_amount_of_possible_war_room_operations = {
	custom_trigger_tooltip = {
		tooltip = HAS_AMOUNT_OF_POSSIBLE_WAR_ROOM_OPERATIONS_TT
		NOT = { check_variable = { possible_war_room_operations_array^num < amount } }
	}
}

# usage:
## set_temp_variable = { amount = 1 }
## has_less_amount_of_possible_war_room_operations = yes
has_less_amount_of_possible_war_room_operations = {
	custom_trigger_tooltip = {
		tooltip = HAS_LESS_AMOUNT_OF_POSSIBLE_WAR_ROOM_OPERATIONS_TT
		check_variable = { possible_war_room_operations_array^num < amount }
	}
}

# usage:
## set_temp_variable = { amount = 1 }
## has_amount_of_active_war_room_operations = yes
has_amount_of_active_war_room_operations = {
	custom_trigger_tooltip = {
		tooltip = HAS_AMOUNT_OF_ACTIVE_WAR_ROOM_OPERATIONS_TT
		NOT = { check_variable = { active_war_room_operations_array^num < amount } }
	}
}

# usage:
## set_temp_variable = { amount = 1 }
## has_less_amount_of_active_war_room_operations = yes
has_less_amount_of_active_war_room_operations = {
	custom_trigger_tooltip = {
		tooltip = HAS_LESS_AMOUNT_OF_ACTIVE_WAR_ROOM_OPERATIONS_TT
		check_variable = { active_war_room_operations_array^num < amount }
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## has_possible_war_room_operation = yes
has_possible_war_room_operation = {
	custom_trigger_tooltip = {
		tooltip = HAS_POSSIBLE_WAR_ROOM_OPERATION_TT
		is_in_array = { possible_war_room_operations_array = operation_id }
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## has_not_possible_war_room_operation = yes
has_not_possible_war_room_operation = {
	custom_trigger_tooltip = {
		tooltip = HAS_NOT_POSSIBLE_WAR_ROOM_OPERATION_TT
		NOT = { is_in_array = { possible_war_room_operations_array = operation_id } }
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## has_active_war_room_operation = yes
has_active_war_room_operation = {
	custom_trigger_tooltip = {
		tooltip = HAS_ACTIVE_WAR_ROOM_OPERATION_TT
		is_in_array = { active_war_room_operations_array = operation_id }
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## has_not_active_war_room_operation = yes
has_not_active_war_room_operation = {
	custom_trigger_tooltip = {
		tooltip = HAS_NOT_ACTIVE_WAR_ROOM_OPERATION_TT
		NOT = { is_in_array = { active_war_room_operations_array = operation_id } }
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## has_war_room_operation_progress_phase_1 = yes
has_war_room_operation_progress_phase_1 = {
	meta_trigger = {
		text = {
			has_progress_phase_1_for_war_room_operation_[ID] = yes
		}
		ID = "[?operation_id]"
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## is_war_room_operation_progress_phase_1_active = yes
is_war_room_operation_progress_phase_1_active = {
	meta_trigger = {
		text = {
			is_progress_phase_1_active_for_war_room_operation_[ID] = yes
		}
		ID = "[?operation_id]"
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## has_war_room_operation_progress_phase_2 = yes
has_war_room_operation_progress_phase_2 = {
	meta_trigger = {
		text = {
			has_progress_phase_2_for_war_room_operation_[ID] = yes
		}
		ID = "[?operation_id]"
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## is_war_room_operation_progress_phase_2_active = yes
is_war_room_operation_progress_phase_2_active = {
	meta_trigger = {
		text = {
			is_progress_phase_2_active_for_war_room_operation_[ID] = yes
		}
		ID = "[?operation_id]"
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## has_war_room_operation_progress_phase_3 = yes
has_war_room_operation_progress_phase_3 = {
	meta_trigger = {
		text = {
			has_progress_phase_3_for_war_room_operation_[ID] = yes
		}
		ID = "[?operation_id]"
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## is_war_room_operation_progress_phase_3_active = yes
is_war_room_operation_progress_phase_3_active = {
	meta_trigger = {
		text = {
			is_progress_phase_3_active_for_war_room_operation_[ID] = yes
		}
		ID = "[?operation_id]"
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## has_war_room_operation_progress_phase_4 = yes
has_war_room_operation_progress_phase_4 = {
	meta_trigger = {
		text = {
			has_progress_phase_4_for_war_room_operation_[ID] = yes
		}
		ID = "[?operation_id]"
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## is_war_room_operation_progress_phase_4_active = yes
is_war_room_operation_progress_phase_4_active = {
	meta_trigger = {
		text = {
			is_progress_phase_4_active_for_war_room_operation_[ID] = yes
		}
		ID = "[?operation_id]"
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## has_completed_war_room_operation = yes
has_completed_war_room_operation = {
	custom_trigger_tooltip = {
		tooltip = HAS_COMPLETED_WAR_ROOM_OPERATION_TT
		meta_trigger = {
			text = {
				has_country_flag = has_completed_war_room_operation_[ID]
			}
			ID = "[?operation_id]"
		}
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## has_not_completed_war_room_operation = yes
has_not_completed_war_room_operation = {
	custom_trigger_tooltip = {
		tooltip = HAS_NOT_COMPLETED_WAR_ROOM_OPERATION_TT
		meta_trigger = {
			text = {
				NOT = { has_country_flag = has_completed_war_room_operation_[ID] }
			}
			ID = "[?operation_id]"
		}
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## has_failed_war_room_operation = yes
has_failed_war_room_operation = {
	custom_trigger_tooltip = {
		tooltip = HAS_FAILED_WAR_ROOM_OPERATION_TT
		meta_trigger = {
			text = {
				has_country_flag = has_failed_war_room_operation_[ID]
			}
			ID = "[?operation_id]"
		}
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## has_not_failed_war_room_operation = yes
has_not_failed_war_room_operation = {
	custom_trigger_tooltip = {
		tooltip = HAS_NOT_FAILED_WAR_ROOM_OPERATION_TT
		meta_trigger = {
			text = {
				NOT = { has_country_flag = has_failed_war_room_operation_[ID] }
			}
			ID = "[?operation_id]"
		}
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## has_launched_war_room_operation = yes
has_launched_war_room_operation = {
	custom_trigger_tooltip = {
		tooltip = HAS_LAUNCHED_WAR_ROOM_OPERATION_TT
		meta_trigger = {
			text = {
				has_country_flag = has_launched_war_room_operation_[ID]
			}
			ID = "[?operation_id]"
		}
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## has_not_launched_war_room_operation = yes
has_not_launched_war_room_operation = {
	custom_trigger_tooltip = {
		tooltip = HAS_NOT_LAUNCHED_WAR_ROOM_OPERATION_TT
		meta_trigger = {
			text = {
				NOT = { has_country_flag = has_launched_war_room_operation_[ID] }
			}
			ID = "[?operation_id]"
		}
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## has_war_room_operation_collapsed = yes
has_war_room_operation_collapsed = {
	meta_trigger = {
		text = {
			has_country_flag = has_minimized_war_room_operation_[ID]
		}
		ID = "[?operation_id]"
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## has_war_room_operation_selected_decisions_tab = yes
has_war_room_operation_selected_decisions_tab = {
	meta_trigger = {
		text = {
			has_country_flag = has_selected_decisions_tab_war_room_operation_[ID]
		}
		ID = "[?operation_id]"
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## can_complete_war_room_operation = yes
can_complete_war_room_operation = {
	has_launched_war_room_operation = yes
	meta_trigger = {
		text = {
			can_complete_war_room_operation_[ID] = yes
		}
		ID = "[?operation_id]"
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## can_fail_war_room_operation = yes
can_fail_war_room_operation = {
	has_launched_war_room_operation = yes
	meta_trigger = {
		text = {
			can_fail_war_room_operation_[ID] = yes
		}
		ID = "[?operation_id]"
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## set_temp_variable = { general_id = 1 }
## is_general_assigned_to_war_room_operation = yes
is_general_assigned_to_war_room_operation = {
	custom_trigger_tooltip = {
		tooltip = IS_GENERAL_ASSIGNED_TO_WAR_ROOM_OPERATION_TT
		meta_trigger = {
			text = {
				is_in_array = { war_room_operation_[ID]_assigned_generals_array = general_id }
			}
			ID = "[?operation_id]"
		}
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## set_temp_variable = { general_id = 1 }
## is_not_general_assigned_to_war_room_operation = yes
is_not_general_assigned_to_war_room_operation = {
	custom_trigger_tooltip = {
		tooltip = IS_NOT_GENERAL_ASSIGNED_TO_WAR_ROOM_OPERATION_TT
		meta_trigger = {
			text = {
				NOT = { is_in_array = { war_room_operation_[ID]_assigned_generals_array = general_id } }
			}
			ID = "[?operation_id]"
		}
	}
}

# usage:
## set_temp_variable = { general_id = 1 }
## is_general_assigned_to_any_war_room_operation = yes
is_general_assigned_to_any_war_room_operation = {
	custom_trigger_tooltip = {
		tooltip = IS_GENERAL_ASSIGNED_TO_ANY_WAR_ROOM_OPERATION_TT
		any_of = {
			array = active_war_room_operations_array
			value = value_temp
			index = index_temp
			set_temp_variable = { operation_id = value_temp }
			is_general_assigned_to_war_room_operation = yes
		}
	}
}

# usage:
## set_temp_variable = { general_id = 1 }
## is_not_general_assigned_to_any_war_room_operation = yes
is_not_general_assigned_to_any_war_room_operation = {
	custom_trigger_tooltip = {
		tooltip = IS_NOT_GENERAL_ASSIGNED_TO_ANY_WAR_ROOM_OPERATION_TT
		all_of = {
			array = active_war_room_operations_array
			value = value_temp
			index = index_temp
			set_temp_variable = { operation_id = value_temp }
			is_not_general_assigned_to_war_room_operation = yes
		}
	}
}

# usage:
## any_general_is_not_assigned_to_any_war_room_operation = yes
any_general_is_not_assigned_to_any_war_room_operation = {
	custom_trigger_tooltip = {
		tooltip = ANY_GENERAL_IS_NOT_ASSIGNED_TO_ANY_WAR_ROOM_OPERATION_TT
		any_of = {
			array = army_leaders
			value = value_temp
			index = index_temp
			set_temp_variable = { general_id = value_temp }
			is_not_general_assigned_to_any_war_room_operation = yes
		}
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## calculate_amount_of_war_room_operation_assigned_generals = yes
calculate_amount_of_war_room_operation_assigned_generals = {
	meta_trigger = {
		text = {
			set_temp_variable = { assigned_generals = war_room_operation_[ID]_assigned_generals_array^num }
		}
		ID = "[?operation_id]"
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## set_temp_variable = { amount = 1 }
## has_amount_of_war_room_operation_assigned_generals = yes
has_amount_of_war_room_operation_assigned_generals = {
	calculate_amount_of_war_room_operation_assigned_generals = yes
	custom_trigger_tooltip = {
		tooltip = HAS_AMOUNT_OF_WAR_ROOM_OPERATION_ASSIGNED_GENERALS_TT
		NOT = { check_variable = { assigned_generals < amount } }
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## set_temp_variable = { amount = 1 }
## has_less_amount_of_war_room_operation_assigned_generals = yes
has_less_amount_of_war_room_operation_assigned_generals = {
	calculate_amount_of_war_room_operation_assigned_generals = yes
	custom_trigger_tooltip = {
		tooltip = HAS_LESS_AMOUNT_OF_WAR_ROOM_OPERATION_ASSIGNED_GENERALS_TT
		check_variable = { assigned_generals < amount }
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## calculate_amount_of_war_room_operation_pre_launch_assigned_generals = yes
calculate_amount_of_war_room_operation_pre_launch_assigned_generals = {
	meta_trigger = {
		text = {
			set_temp_variable = { pre_launch_assigned_generals = war_room_operation_[ID]_pre_launch_assigned_generals_array^num }
		}
		ID = "[?operation_id]"
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## set_temp_variable = { amount = 1 }
## has_amount_of_war_room_operation_pre_launch_assigned_generals = yes
has_amount_of_war_room_operation_pre_launch_assigned_generals = {
	calculate_amount_of_war_room_operation_pre_launch_assigned_generals = yes
	custom_trigger_tooltip = {
		tooltip = HAS_AMOUNT_OF_WAR_ROOM_OPERATION_PRE_LAUNCH_ASSIGNED_GENERALS_TT
		NOT = { check_variable = { pre_launch_assigned_generals < amount } }
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## set_temp_variable = { amount = 1 }
## has_less_amount_of_war_room_operation_pre_launch_assigned_generals = yes
has_less_amount_of_war_room_operation_pre_launch_assigned_generals = {
	calculate_amount_of_war_room_operation_pre_launch_assigned_generals = yes
	custom_trigger_tooltip = {
		tooltip = HAS_LESS_AMOUNT_OF_WAR_ROOM_OPERATION_PRE_ASSIGNED_ASSIGNED_GENERALS_TT
		check_variable = { pre_launch_assigned_generals < amount }
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## calculate_amount_of_war_room_operation_used_generals = yes
calculate_amount_of_war_room_operation_used_generals = {
	meta_trigger = {
		text = {
			set_temp_variable = { used_generals = war_room_operation_[ID]_used_generals_amount }
		}
		ID = "[?operation_id]"
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## set_temp_variable = { amount = 1 }
## has_amount_of_war_room_operation_used_generals = yes
has_amount_of_war_room_operation_used_generals = {
	calculate_amount_of_war_room_operation_used_generals = yes
	custom_trigger_tooltip = {
		tooltip = HAS_AMOUNT_OF_WAR_ROOM_OPERATION_USED_GENERALS_TT
		NOT = { check_variable = { used_generals < amount } }
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## set_temp_variable = { amount = 1 }
## has_less_amount_of_war_room_operation_used_generals = yes
has_less_amount_of_war_room_operation_used_generals = {
	calculate_amount_of_war_room_operation_used_generals = yes
	custom_trigger_tooltip = {
		tooltip = HAS_LESS_AMOUNT_OF_WAR_ROOM_OPERATION_USED_GENERALS_TT
		check_variable = { used_generals < amount }
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## calculate_war_room_operation_progress = yes
calculate_war_room_operation_progress = {
	hidden_trigger = {
		meta_trigger = {
			text = {
				set_temp_variable = { operation_progress = war_room_operation_[ID]_progress }
			}
			ID = "[?operation_id]"
		}
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## set_temp_variable = { amount = 1 }
## has_amount_of_war_room_operation_progress = yes
has_amount_of_war_room_operation_progress = {
	calculate_war_room_operation_progress = yes
	custom_trigger_tooltip = {
		tooltip = HAS_AMOUNT_OF_WAR_ROOM_OPERATION_PROGRESS_TT
		NOT = { check_variable = { operation_progress < amount } }
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## set_temp_variable = { amount = 1 }
## has_less_amount_of_war_room_operation_progress = yes
has_less_amount_of_war_room_operation_progress = {
	calculate_war_room_operation_progress = yes
	custom_trigger_tooltip = {
		tooltip = HAS_LESS_AMOUNT_OF_WAR_ROOM_OPERATION_PROGRESS_TT
		check_variable = { operation_progress < amount }
	}
}

# usage:
## set_temp_variable = { decision_id = token:name }
## is_war_room_operation_decision_completed = yes
is_war_room_operation_decision_completed = {
	custom_trigger_tooltip = {
		tooltip = IS_WAR_ROOM_OPERATION_DECISION_COMPLETED_TT
		if = {
			limit = {
				is_in_array = { war_room_operation_completed_decisions_array = decision_id }
				NOT = { is_war_room_operation_decision_in_progress = yes }
			}
			if = {
				limit = {
					NOT = { check_variable = { decision_id_temp = 0 } }
				}
				set_temp_variable = { decision_id = decision_id_temp }
				set_temp_variable = { decision_id_temp = 0 }
			}
			always = yes
		}
		else = {
			if = {
				limit = {
					NOT = { check_variable = { decision_id_temp = 0 } }
				}
				set_temp_variable = { decision_id = decision_id_temp }
				set_temp_variable = { decision_id_temp = 0 }
			}
			always = no
		}
	}
}

# usage:
## set_temp_variable = { decision_id = token:name }
## is_not_war_room_operation_decision_completed = yes
is_not_war_room_operation_decision_completed = {
	custom_trigger_tooltip = {
		tooltip = IS_NOT_WAR_ROOM_OPERATION_DECISION_COMPLETED_TT
		if = {
			limit = {
				OR = {
					NOT = { is_in_array = { war_room_operation_completed_decisions_array = decision_id } }
					is_war_room_operation_decision_in_progress = yes
				}
			}
			if = {
				limit = {
					NOT = { check_variable = { decision_id_temp = 0 } }
				}
				set_temp_variable = { decision_id = decision_id_temp }
				set_temp_variable = { decision_id_temp = 0 }
			}
			always = yes
		}
		else = {
			if = {
				limit = {
					NOT = { check_variable = { decision_id_temp = 0 } }
				}
				set_temp_variable = { decision_id = decision_id_temp }
				set_temp_variable = { decision_id_temp = 0 }
			}
			always = no
		}
	}
}

# usage:
## set_temp_variable = { decision_id = token:name }
## is_war_room_operation_decision_in_progress = yes
is_war_room_operation_decision_in_progress = {
	if = {
		limit = {
			meta_trigger = {
				text = {
					has_decision = [ID]
				}
				ID = "[?decision_id.GetTokenKey]"
			}
		}
		if = {
			limit = {
				NOT = { check_variable = { decision_id_temp = 0 } }
			}
			set_temp_variable = { decision_id = decision_id_temp }
			set_temp_variable = { decision_id_temp = 0 }
		}
		always = yes
	}
	else = {
		if = {
			limit = {
				NOT = { check_variable = { decision_id_temp = 0 } }
			}
			set_temp_variable = { decision_id = decision_id_temp }
			set_temp_variable = { decision_id_temp = 0 }
		}
		always = no
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## is_any_war_room_operation_decision_in_progress = yes
is_any_war_room_operation_decision_in_progress = {
	set_temp_variable = { decision_id_temp = decision_id }
	custom_trigger_tooltip = {
		tooltip = IS_ANY_WAR_ROOM_OPERATION_DECISION_IN_PROGRESS_TT
		meta_trigger = {
			text = {
				any_of = {
					array = global.war_room_operation_[OPERATION_ID]_decisions_array
					value = value_temp
					index = index_temp
					set_temp_variable = { decision_id = value_temp }
					is_war_room_operation_decision_in_progress = yes
				}
			}
			OPERATION_ID = "[?operation_id]"
		}
	}
	if = {
		limit = {
			NOT = { check_variable = { decision_id_temp = 0 } }
		}
		set_temp_variable = { decision_id = decision_id_temp }
		set_temp_variable = { decision_id_temp = 0 }
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## is_not_any_war_room_operation_decision_in_progress = yes
is_not_any_war_room_operation_decision_in_progress = {
	set_temp_variable = { decision_id_temp = decision_id }
	custom_trigger_tooltip = {
		tooltip = IS_NOT_ANY_WAR_ROOM_OPERATION_DECISION_IN_PROGRESS_TT
		meta_trigger = {
			text = {
				all_of = {
					array = global.war_room_operation_[OPERATION_ID]_decisions_array
					value = value_temp
					index = index_temp
					set_temp_variable = { decision_id = value_temp }
					NOT = { is_war_room_operation_decision_in_progress = yes }
				}
			}
			OPERATION_ID = "[?operation_id]"
		}
	}
	if = {
		limit = {
			NOT = { check_variable = { decision_id_temp = 0 } }
		}
		set_temp_variable = { decision_id = decision_id_temp }
		set_temp_variable = { decision_id_temp = 0 }
	}
}

# usage:
## set_temp_variable = { decision_id = token:name }
## is_war_room_operation_decision_visible = yes
is_war_room_operation_decision_visible = {
	set_temp_variable = { decision_id_temp = decision_id }
	meta_trigger = {
		text = {
			war_room_operation_decision_visible_trigger_[ID] = yes
		}
		ID = "[?decision_id.GetTokenKey]"
	}
	if = {
		limit = {
			NOT = { check_variable = { decision_id_temp = 0 } }
		}
		set_temp_variable = { decision_id = decision_id_temp }
		set_temp_variable = { decision_id_temp = 0 }
	}
}

# usage:
## set_temp_variable = { decision_id = token:name }
## is_war_room_operation_decision_available = yes
is_war_room_operation_decision_available = {
	set_temp_variable = { decision_id_temp = decision_id }
	meta_trigger = {
		text = {
			war_room_operation_decision_available_trigger_[ID] = yes
		}
		ID = "[?decision_id.GetTokenKey]"
	}
	if = {
		limit = {
			NOT = { check_variable = { decision_id_temp = 0 } }
		}
		set_temp_variable = { decision_id = decision_id_temp }
		set_temp_variable = { decision_id_temp = 0 }
	}
}

# usage:
## set_temp_variable = { decision_id = token:name }
## is_war_room_operation_decision_removing = yes
is_war_room_operation_decision_removing = {
	set_temp_variable = { decision_id_temp = decision_id }
	meta_trigger = {
		text = {
			war_room_operation_decision_remove_trigger_[ID] = yes
		}
		ID = "[?decision_id.GetTokenKey]"
	}
	if = {
		limit = {
			NOT = { check_variable = { decision_id_temp = 0 } }
		}
		set_temp_variable = { decision_id = decision_id_temp }
		set_temp_variable = { decision_id_temp = 0 }
	}
}

# usage:
## set_temp_variable = { decision_id = token:name }
## is_war_room_operation_decision_canceling = yes
is_war_room_operation_decision_canceling = {
	set_temp_variable = { decision_id_temp = decision_id }
	meta_trigger = {
		text = {
			war_room_operation_decision_cancel_trigger_[ID] = yes
		}
		ID = "[?decision_id.GetTokenKey]"
	}
	if = {
		limit = {
			NOT = { check_variable = { decision_id_temp = 0 } }
		}
		set_temp_variable = { decision_id = decision_id_temp }
		set_temp_variable = { decision_id_temp = 0 }
	}
}

# usage:
## set_temp_variable = { decision_id = token:name }
## calculate_war_room_operation_decision_cost = yes
calculate_war_room_operation_decision_cost = {
	set_temp_variable = { decision_id_temp = decision_id }
	meta_trigger = {
		text = {
			war_room_operation_decision_cost_calculation_[ID] = yes
		}
		ID = "[?decision_id.GetTokenKey]"
	}
	if = {
		limit = {
			NOT = { check_variable = { decision_id_temp = 0 } }
		}
		set_temp_variable = { decision_id = decision_id_temp }
		set_temp_variable = { decision_id_temp = 0 }
	}
	if = {
		limit = {
			check_variable = { cp_cost < 0 }
		}
		set_temp_variable = { cp_cost = 0 }
	}
	clamp_temp_variable = {
		var = generals_cost
		min = 0
		max = 4
	}
}

# usage:
## set_temp_variable = { operation_id = 1 }
## set_temp_variable = { decision_id = token:name }
## can_afford_war_room_operation_decision_cost = yes
can_afford_war_room_operation_decision_cost = {
	calculate_war_room_operation_decision_cost = yes
	can_afford_war_room_operation_decision_cost_cp = yes
	can_afford_war_room_operation_decision_cost_generals = yes
}

# usage:
## set_temp_variable = { cp_cost = 1 }
## can_afford_war_room_operation_decision_cost_cp = yes
can_afford_war_room_operation_decision_cost_cp = {
	NOT = { command_power < cp_cost }
}

# usage:
## set_temp_variable = { generals_cost = 1 }
## can_afford_war_room_operation_decision_cost_generals = yes
can_afford_war_room_operation_decision_cost_generals = {
	calculate_amount_of_war_room_operation_used_generals = yes
	calculate_amount_of_war_room_operation_assigned_generals = yes
	set_temp_variable = { available_generals = assigned_generals }
	subtract_from_temp_variable = { available_generals = used_generals }
	NOT = { check_variable = { available_generals < generals_cost } }
}